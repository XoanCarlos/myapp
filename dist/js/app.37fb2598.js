(function(){"use strict";var t={115:function(t,e,n){var r=n(963),o=n(252);function a(t,e){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n)}var i=n(744);const l={},s=(0,i.Z)(l,[["render",a]]);var c=s,u=n(577);const d={class:"text-center"};function m(t,e,n,r,a,i){const l=(0,o.up)("NavBar");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",null,[(0,o.Wm)(l)]),(0,o._)("div",null,[(0,o._)("h1",d,"Página proyecto del "+(0,u.zw)(a.alumno),1)])],64)}var p=n(206),f={name:"PaginaInicio",components:{NavBar:p.Z},data(){return{alumno:"nombre del alumno/a"}},mounted(){console.log("Componente PaginaInicio.vue cargado")}};const h=(0,i.Z)(f,[["render",m]]);var b=h;const v=(0,o._)("br",null,null,-1),g=(0,o._)("div",{class:"row justify-content-center mt-4"},[(0,o._)("h3",{class:"text-center font-weight-bold"},"Gestión Clientes")],-1),_=(0,o._)("hr",null,null,-1),y={class:"container-fluid"},w={class:"row",id:"map_section"},C={class:"col-12 col-m-6 col-lg-8 mx-auto"},k={class:"form-inline"},x={class:"input-group mb-3"},E=(0,o._)("span",{class:"input-group-text custom-span"},"DNI/NIE:",-1),N={class:"input-group mb-3"},A=(0,o._)("span",{class:"input-group-text custom-span"},"Nombre:",-1),D={class:"input-group mb-3"},S=(0,o._)("span",{class:"input-group-text custom-span"},"Apellidos:",-1),j={class:"input-group mb-3"},B=(0,o._)("span",{class:"input-group-text custom-span"},"Email:",-1),T={class:"text-center"},O=(0,o._)("hr",null,null,-1),U={class:"row justify-content-center mt-4"},I={class:"col-md-8 bg-light"},P=(0,o._)("div",{class:"row justify-content-center text-primary p-2"},[(0,o._)("h5",{class:"text-center font-weight-bold"},"Listado Clientes")],-1),W={class:"table-responsive"},Z={class:"table table-striped table-bordered"},q=(0,o._)("thead",{class:"table-info"},[(0,o._)("tr",{class:"text-center"},[(0,o._)("th",null,"DNI"),(0,o._)("th",null,"Apellido"),(0,o._)("th",null,"Nombre"),(0,o._)("th",null,"Correo Electrónico"),(0,o._)("th",null,"Acciones")])],-1),L={class:"text-center"},V={class:"text-center"},Y={class:"text-center"},$=["onClick"],F=(0,o._)("i",{class:"fas fa-pencil-alt"},null,-1),H=[F],M=["onClick"],R=(0,o._)("i",{class:"bi bi-trash"},null,-1),z=[R];function X(t,e,n,a,i,l){const s=(0,o.up)("NavBar");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",null,[(0,o.Wm)(s)]),v,g,_,(0,o._)("div",y,[(0,o._)("div",w,[(0,o._)("div",C,[(0,o._)("form",k,[(0,o._)("div",x,[E,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.dni=t),type:"text",class:"form-control form-control-sm",id:"dni",name:"dni",onBlur:e[1]||(e[1]=(...t)=>l.validarDniNie&&l.validarDniNie(...t))},null,544),[[r.nr,i.dni]])]),(0,o._)("div",N,[A,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.nombre=t),type:"text",class:"form-control",id:"nombre",name:"nombre"},null,512),[[r.nr,i.nombre]])]),(0,o._)("div",D,[S,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.apellido=t),type:"text",class:"form-control",id:"apellido",name:"apellido"},null,512),[[r.nr,i.apellido]])]),(0,o._)("div",j,[B,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.email=t),type:"text",class:"form-control",id:"email",name:"email"},null,512),[[r.nr,i.email]])]),(0,o._)("div",T,[(0,o._)("button",{type:"button",class:"btn btn-primary m-2",onClick:e[5]||(e[5]=(...t)=>l.guardarCliente&&l.guardarCliente(...t))},"Guardar"),(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:e[6]||(e[6]=(...t)=>l.limpiar&&l.limpiar(...t))},"Limpiar")])])])])]),O,(0,o._)("div",U,[(0,o._)("div",I,[P,(0,o._)("div",W,[(0,o._)("table",Z,[q,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.clientes,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",L,(0,u.zw)(t.dni),1),(0,o._)("td",null,(0,u.zw)(t.apellido),1),(0,o._)("td",null,(0,u.zw)(t.nombre),1),(0,o._)("td",V,(0,u.zw)(t.email),1),(0,o._)("td",Y,[(0,o._)("div",null,[(0,o._)("button",{class:"btn btn-warning m-2",onClick:e=>l.modificarCliente(t.id)},H,8,$),(0,o._)("button",{class:"btn btn-danger m-2",onClick:e=>l.eliminarCliente(t.id)},z,8,M)])])])))),128))])])])])])],64)}var G=n(455),K=n.n(G),J={name:"TablaClientes",components:{NavBar:p.Z},data(){return{clientes:[],clienteSeleccionado:null,dni:"",nombre:"",apellido:"",email:""}},mounted(){this.obtenerClientes()},methods:{async obtenerClientes(){try{const t=await fetch("http://localhost:3000/clientes");if(!t.ok)throw new Error("No se pudieron obtener los datos del servidor.");this.clientes=await t.json()}catch(t){console.error("Error al obtener los clientes:",t),K().fire({icon:"error",title:"Error",text:"No se pudieron obtener los datos del servidor."})}},async guardarCliente(){try{const t=this.validarDniNie();if(t){const t={dni:this.dni.trim().toUpperCase(),nombre:this.nombre.trim(),apellido:this.apellido.trim(),email:this.email.trim()};let e="http://localhost:3000/clientes",n="POST";this.clienteSeleccionado&&(e+=`/${this.clienteSeleccionado.id}`,n="PUT");const r=await fetch(e,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Error al guardar el cliente en el servidor.");this.limpiar(),this.obtenerClientes();const o=this.clienteSeleccionado?"Cliente modificado correctamente.":"Cliente guardado correctamente.";K().fire({icon:"success",title:"Éxito",text:o})}else this.mostrarAlerta("DNI o NIE no válido","error")}catch(t){console.error("Error al guardar el cliente:",t),K().fire({icon:"error",title:"Error",text:"Error al guardar el cliente en el servidor."})}},validarDniNie(){const t=this.dni.trim().toUpperCase(),e=/^[0-9XYZ][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/;if(!e.test(t))return this.mostrarAlerta("DNI o NIE no válido","error"),!1;const n=t.replace(/^[XYZ]/,(t=>"X"===t?"0":"Y"===t?"1":"Z"===t?"2":t)),r=parseInt(n.slice(0,9),10);let o="TRWAGMYFPDXBNJZSQVHLCKE".charAt(r%23);return o===t.charAt(8)||(this.mostrarAlerta("DNI o NIE no válido","error"),!1)},modificarCliente(t){const e=this.clientes.find((e=>e.id===t));e?(this.clienteSeleccionado=e,this.dni=e.dni,this.nombre=e.nombre,this.apellido=e.apellido,this.email=e.email,this.mostrarAlerta("Datos del cliente listos para modificar","info")):this.mostrarAlerta("Cliente no encontrado","error")},async eliminarCliente(t){const e=await this.mostrarConfirmacionEliminar();if(e){const e=this.clientes.findIndex((e=>e.id===t));-1!==e?(await fetch(`http://localhost:3000/clientes/${t}`,{method:"DELETE"}),this.mostrarAlerta("Cliente eliminado correctamente","success")):this.mostrarAlerta("Cliente no encontrado","error")}},limpiar(){this.nombre="",this.apellido="",this.dni="",this.email="",this.mostrarAlerta("Campos limpiados","info")},mostrarAlerta(t,e){K().fire({title:t,icon:e,customClass:{container:"custom-alert-container",popup:"custom-alert",confirmButton:"custom-alert-button"}})},async mostrarConfirmacionEliminar(){const t=await K().fire({title:"¿Estás seguro de que deseas eliminar este cliente?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar",customClass:{container:"custom-alert-container",popup:"custom-alert",confirmButton:"custom-alert-button",cancelButton:"custom-alert-button"}});return t.isConfirmed}}};const Q=(0,i.Z)(J,[["render",X]]);var tt=Q,et=n(119);const nt=[{path:"/",name:"home",component:b},{path:"/clientes",name:"clientes",component:tt},{path:"/articulos",name:"articulos",component:()=>n.e(694).then(n.bind(n,694))},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>n.e(379).then(n.bind(n,930))}],rt=(0,et.p7)({history:(0,et.PO)("/myapp/"),routes:nt});var ot=rt;(0,r.ri)(c).use(ot).mount("#app")},206:function(t,e,n){n.d(e,{Z:function(){return _}});var r=n(252);const o={class:"navbar navbar-dark bg-primary"},a={class:"container-fluid"},i=(0,r._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r._)("span",{class:"navbar-toggler-icon"})],-1),l=(0,r._)("form",{class:"d-flex"},[(0,r._)("input",{class:"form-control me-2",type:"search",placeholder:"Búsqueda","aria-label":"Search"}),(0,r._)("button",{class:"btn btn-outline-success btn-light btn-no-hover",type:"submit"},[(0,r._)("i",{class:"bi bi-search"})])],-1),s={class:"collapse navbar-collapse",id:"navbarSupportedContent"},c={class:"navbar-nav me-auto mb-2 mb-lg-0"},u={class:"nav-item"},d={key:0,class:"nav-item"},m={key:1,class:"nav-item"},p={key:2,class:"nav-item"},f={key:3,class:"nav-item"};function h(t,e,n,h,b,v){const g=(0,r.up)("router-link"),_=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("nav",o,[(0,r._)("div",a,[i,(0,r.Wm)(g,{to:"/",class:"navbar-brand"},{default:(0,r.w5)((()=>[(0,r.Uk)("Inicio")])),_:1}),(0,r.Wm)(g,{to:"/clientes",class:"navbar-brand"},{default:(0,r.w5)((()=>[(0,r.Uk)("Clientes")])),_:1}),v.articulosExists?((0,r.wg)(),(0,r.j4)(g,{key:0,to:"/articulos",class:"navbar-brand"},{default:(0,r.w5)((()=>[(0,r.Uk)("Artículos")])),_:1})):(0,r.kq)("",!0),v.ventasExists?((0,r.wg)(),(0,r.j4)(g,{key:1,to:"/ventas",class:"navbar-brand"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ventas")])),_:1})):(0,r.kq)("",!0),v.contactoExists?((0,r.wg)(),(0,r.j4)(g,{key:2,to:"/contacto",class:"navbar-brand"},{default:(0,r.w5)((()=>[(0,r.Uk)("Contacto")])),_:1})):(0,r.kq)("",!0),l,(0,r._)("div",s,[(0,r._)("ul",c,[(0,r._)("li",u,[(0,r.Wm)(g,{to:"/",class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Inicio")])),_:1})]),v.clientesExists?((0,r.wg)(),(0,r.iD)("li",d,[(0,r.Wm)(g,{to:"/clientes",class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Clientes")])),_:1})])):(0,r.kq)("",!0),v.articulosExists?((0,r.wg)(),(0,r.iD)("li",m,[(0,r.Wm)(g,{to:"/articulos",class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Artículos")])),_:1})])):(0,r.kq)("",!0),v.ventasExists?((0,r.wg)(),(0,r.iD)("li",p,[(0,r.Wm)(g,{to:"/ventas",class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ventas")])),_:1})])):(0,r.kq)("",!0),v.contactoExists?((0,r.wg)(),(0,r.iD)("li",f,[(0,r.Wm)(g,{to:"/contacto",class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Contacto")])),_:1})])):(0,r.kq)("",!0)])])])]),(0,r.Wm)(_)])}var b={computed:{clientesExists(){return this.$router.hasRoute("clientes")},ventasExists(){return this.$router.hasRoute("ventas")},contactoExists(){return this.$router.hasRoute("contacto")},articulosExists(){return this.$router.hasRoute("articulos")}}},v=n(744);const g=(0,v.Z)(b,[["render",h]]);var _=g}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,r,o,a){if(!r){var i=1/0;for(u=0;u<t.length;u++){r=t[u][0],o=t[u][1],a=t[u][2];for(var l=!0,s=0;s<r.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((function(t){return n.O[t](r[s])}))?r.splice(s--,1):(l=!1,a<i&&(i=a));if(l){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[r,o,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,r){return n.f[r](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+"."+{379:"9194b289",694:"43b1a689"}[t]+".js"}}(),function(){n.miniCssF=function(t){return"css/"+t+"."+{379:"f450c800",694:"6c08300d"}[t]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="myapp:";n.l=function(r,o,a,i){if(t[r])t[r].push(o);else{var l,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+a){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",e+a),l.src=r),t[r]=[o];var m=function(e,n){l.onerror=l.onload=null,clearTimeout(p);var o=t[r];if(delete t[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(t){return t(n)})),e)return e(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/myapp/"}(),function(){if("undefined"!==typeof document){var t=function(t,e,n,r,o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var i=function(n){if(a.onerror=a.onload=null,"load"===n.type)r();else{var i=n&&n.type,l=n&&n.target&&n.target.href||e,s=new Error("Loading CSS chunk "+t+" failed.\n("+i+": "+l+")");s.name="ChunkLoadError",s.code="CSS_CHUNK_LOAD_FAILED",s.type=i,s.request=l,a.parentNode&&a.parentNode.removeChild(a),o(s)}};return a.onerror=a.onload=i,a.href=e,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a),a},e=function(t,e){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=n[r],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===t||a===e))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){o=i[r],a=o.getAttribute("data-href");if(a===t||a===e)return o}},r=function(r){return new Promise((function(o,a){var i=n.miniCssF(r),l=n.p+i;if(e(i,l))return o();t(r,l,null,o,a)}))},o={143:0};n.f.miniCss=function(t,e){var n={379:1,694:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=r(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}}(),function(){var t={143:0};n.f.j=function(e,r){var o=n.o(t,e)?t[e]:void 0;if(0!==o)if(o)r.push(o[2]);else{var a=new Promise((function(n,r){o=t[e]=[n,r]}));r.push(o[2]=a);var i=n.p+n.u(e),l=new Error,s=function(r){if(n.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,o[1](l)}};n.l(i,s,"chunk-"+e,e)}},n.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,a,i=r[0],l=r[1],s=r[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var u=s(n)}for(e&&e(r);c<i.length;c++)a=i[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},r=self["webpackChunkmyapp"]=self["webpackChunkmyapp"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(115)}));r=n.O(r)})();
//# sourceMappingURL=app.37fb2598.js.map